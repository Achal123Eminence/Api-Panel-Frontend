<div class="cricket-container">
  <div class="table-responsive" style="box-shadow: #000 0 2px 6px;border-radius: 10px;" *ngIf="skySrlMatchListDS().length > 0 && (sportId == 1 || sportId == 2)">
    <div class="select-sport" style="border-bottom: 1px solid #e4e4e4;">
      <h3>{{ sportId === '4' ? 'üèè ' : sportId === '1' ? '‚öΩ ' : sportId === '2' ? 'üéæ ' : '' }} SKY SRL {{ sportId === '4' ? ' Cricket' : sportId === '1' ? ' Soccer' : sportId === '2' ? ' Tennis' : '' }} Matches</h3>
    </div>

    <!-- Table -->
    <table class="table mb-0">
      <thead>
        <tr>
          <th style="width: 4%;">Sr.No</th>
          <th style="width: 8%;">EventId</th>
          <th style="width: 8%;">MarketID</th>
          <th style="width: 21%;">Event Name</th>
          <th style="width: 17%;">Cmpt Name</th>
          <th style="width: 15%;">Open Date</th>
          <th style="width: 11%;text-align: center;">Provider</th>
          <th style="width: 8%;text-align: center;">Action</th>
          <th style="width: 8%;text-align: center;">Action 2</th>
        </tr>
      </thead>
      <tbody>
        @for (item of skySrlMatchListDS(); track $index) {
          <tr>
            <td scope="row">{{ ($index + 1) }}</td>
            <td>{{item.eventId}}</td>
            <td>{{item.marketId}}</td>
            <td>{{item.eventName}}</td>
            <td>
              <span>{{item.competitionName}}</span>
            <td>{{item.openDate}}</td>
            <td style="text-align: center;line-height: 32px;"><span [ngClass]="item.provider === 'sky' ? 'badge-pink' : 'badge-blue'" >{{item.provider}}</span></td>
            <td>
              <div style="display: flex;justify-content: center;gap: 1rem;">
                <button  class="events-btn-added" *ngIf="item.isAdded == false" (click)="openDoubleEventModal(item,false)">Add Single</button>
                <button  class="events-btn" style="" *ngIf="item.isAdded == true" >Added 1</button>
              </div>
            </td>
            <td>
              <div style="display: flex;justify-content: center;gap: 1rem;">
                <button  class="events-btn-added" *ngIf="item.isAdded == false" (click)="openDoubleEventModal(item,true)">Add Double</button>
                <button  class="events-btn" style="" *ngIf="item.isAdded == true" >Added 1</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  
  <!-- Betfair Match -->
  <div class="table-responsive" style="box-shadow: #000 0 2px 6px;border-radius: 10px;" *ngIf="betfairMatchListDS().length > 0">
    <div class="select-sport" style="border-bottom: 1px solid #e4e4e4;">
      <h3>{{ sportId === '4' ? 'üèè ' : sportId === '1' ? '‚öΩ ' : sportId === '2' ? 'üéæ ' : '' }} DIAMOND/SKY Betfair {{ sportId === '4' ? ' Cricket' : sportId === '1' ? ' Soccer' : sportId === '2' ? ' Tennis' : '' }} Matches</h3>
    </div>

    <!-- Table -->
    <table class="table mb-0">
      <thead>
        <tr>
          <th style="width: 4%;">Sr.No</th>
          <th style="width: 8%;">EventId</th>
          <th style="width: 8%;">MarketID</th>
          <th style="width: 26%;">Event Name</th>
          <th style="width: 20%;">Cmpt Name</th>
          <th style="width: 17%;">Open Date</th>
          <th style="width: 7%;text-align: center;">Provider</th>
          <th style="width: 10%;text-align: center;">Action</th>
        </tr>
      </thead>
      <tbody>
        @for (item of betfairMatchListDS(); track $index) {
          <tr>
            <td scope="row">{{ ($index + 1) }}</td>
            <td>{{item.eventId}}</td>
            <td>{{item.marketId}}</td>
            <td>{{item.eventName}}</td>
            <td>
              <span>{{item.competitionName}}</span>
            <td>{{item.openDate}}</td>
            <td style="text-align: center;line-height: 32px;"><span [ngClass]="item.provider === 'sky' ? 'badge-pink' : 'badge-blue'" >{{item.provider}}</span></td>
            <td>
              <div style="display: flex;justify-content: center;gap: 1rem;">
                <button  class="events-btn-added" *ngIf="item.isAdded == false" (click)="openModal(item,false)">Add Match</button>
                <button  class="events-btn" style="" *ngIf="item.isAdded == true" >Added</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Manual Match -->
  <div class="table-responsive" style="box-shadow: #000 0 2px 6px;border-radius: 10px;" *ngIf="manualMatchListDS().length > 0">
    <div class="select-sport" style="border-bottom: 1px solid #e4e4e4;">
      <h3>{{ sportId === '4' ? 'üèè ' : sportId === '1' ? '‚öΩ ' : sportId === '2' ? 'üéæ ' : '' }} DIAMOND/SKY Manual {{ sportId === '4' ? ' Cricket' : sportId === '1' ? ' Soccer' : sportId === '2' ? ' Tennis' : '' }} Matches</h3>
    </div>

    <!-- Table -->
    <table class="table mb-0">
      <thead>
        <tr>
          <th style="width: 4%;">Sr.No</th>
          <th style="width: 8%;">EventId</th>
          <th style="width: 8%;">MarketID</th>
          <th style="width: 21%;">Event Name</th>
          <th style="width: 17%;">Cmpt Name</th>
          <th style="width: 15%;">Open Date</th>
          <th style="width: 11%;text-align: center;">Provider</th>
          <th style="width: 8%;text-align: center;">Action</th>
          <th style="width: 8%;text-align: center;">Action 2</th>
        </tr>
      </thead>
      <tbody>
        @for (item of manualMatchListDS(); track $index) {
          <tr>
            <td scope="row">{{ ($index + 1) }}</td>
            <td>{{item.eventId}}</td>
            <td>{{item.marketId}}</td>
            <td>{{item.eventName}}</td>
            <td>
              <span>{{item.competitionName}}</span>
            <td>{{item.openDate}}</td>
            <td style="text-align: center;line-height: 32px;"><span [ngClass]="item.provider === 'sky' ? 'badge-pink' : 'badge-blue'" >{{item.provider}}</span></td>
            <td>
              <div style="display: flex;justify-content: center;gap: 1rem;">
                <button  class="events-btn-added" *ngIf="item.isAdded == false" (click)="openDoubleEventModal(item,false)">Add Single</button>
                <button  class="events-btn" style="" *ngIf="item.isAdded == true" >Added 2</button>
              </div>
            </td>
            <td>
              <div style="display: flex;justify-content: center;gap: 1rem;">
                <button  class="events-btn-added" *ngIf="item.isAdded == false" (click)="openDoubleEventModal(item,true)">Add Double</button>
                <button  class="events-btn" style="" *ngIf="item.isAdded == true" >Added 2</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- SRL Match -->
  <div class="table-responsive" style="box-shadow: #000 0 2px 6px;border-radius: 10px;" *ngIf="skySrlMatchListDS().length > 0 && sportId == 4">
    <div class="select-sport" style="border-bottom: 1px solid #e4e4e4;">
      <h3>{{ sportId === '4' ? 'üèè ' : sportId === '1' ? '‚öΩ ' : sportId === '2' ? 'üéæ ' : '' }} SKY SRL {{ sportId === '4' ? ' Cricket' : sportId === '1' ? ' Soccer' : sportId === '2' ? ' Tennis' : '' }} Matches</h3>
    </div>

    <!-- Table -->
    <table class="table mb-0">
      <thead>
        <tr>
          <th style="width: 4%;">Sr.No</th>
          <th style="width: 8%;">EventId</th>
          <th style="width: 8%;">MarketID</th>
          <th style="width: 21%;">Event Name</th>
          <th style="width: 17%;">Cmpt Name</th>
          <th style="width: 15%;">Open Date</th>
          <th style="width: 11%;text-align: center;">Provider</th>
          <th style="width: 8%;text-align: center;">Action</th>
          <th style="width: 8%;text-align: center;">Action 2</th>
        </tr>
      </thead>
      <tbody>
        @for (item of skySrlMatchListDS(); track $index) {
          <tr>
            <td scope="row">{{ ($index + 1) }}</td>
            <td>{{item.eventId}}</td>
            <td>{{item.marketId}}</td>
            <td>{{item.eventName}}</td>
            <td>
              <span>{{item.competitionName}}</span>
            <td>{{item.openDate}}</td>
            <td style="text-align: center;line-height: 32px;"><span [ngClass]="item.provider === 'sky' ? 'badge-pink' : 'badge-blue'" >{{item.provider}}</span></td>
            <td>
              <div style="display: flex;justify-content: center;gap: 1rem;">
                <button  class="events-btn-added" *ngIf="item.isAdded == false" (click)="openDoubleEventModal(item,false)">Add Single</button>
                <button  class="events-btn" style="" *ngIf="item.isAdded == true" >Added 1</button>
              </div>
            </td>
            <td>
              <div style="display: flex;justify-content: center;gap: 1rem;">
                <button  class="events-btn-added" *ngIf="item.isAdded == false" (click)="openDoubleEventModal(item,true)">Add Double</button>
                <button  class="events-btn" style="" *ngIf="item.isAdded == true" >Added 1</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<!-- Modal popup -->
<div class="modal fade" id="addEventModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header" style="padding: 8px 16px;">
        <h5 class="modal-title">Add Event Details</h5>
        <button type="button" class="btn-close" (click)="closeModal()" style="padding: 6px;font-size: 9px;"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="addEventForm" (ngSubmit)="addEvent()">

          <div class="mb-3 form-main">
            <div class="form-sub" *ngIf="selectedEvent?.isCompetitionExist === false">
              <label>Competition Grade</label>
              <select class="form-select" formControlName="competitionGrade">
                <option value="">Select</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
              </select>
            </div>
            
            <div class="form-sub">
              <label>Event Grade</label>
              <select class="form-select" formControlName="eventGrade">
                <option value="">Select</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
              </select>
            </div>
          </div>

          <!-- <div *ngIf="selectedSport === '4' && selectedEvent?.marketName !== 'Winner'">
            <div class="mb-3">
              <label>Match Type</label>
              <select class="form-select" formControlName="matchType">
                <option value="">Select</option>
                <option value="t10">T10</option>
                <option value="t15">T15</option>
                <option value="100balls">100 Balls</option>
                <option value="t20">T20</option>
                <option value="oneDay">One Day</option>
                <option value="test">Test</option>
              </select>
            </div>
          
            <div class="mb-3">
              <label>Premium</label>
              <select class="form-select" formControlName="premium">
                <option value="">Select</option>
                <option [ngValue]="true">Yes</option>
                <option [ngValue]="false">No</option>
              </select>
            </div>
          
          </div> -->
          <div *ngIf="selectedSport === '4' && selectedEvent?.isWinnerOpen !== true">
            <div class="mb-3">
              <label class="d-block mb-2">Match Type</label>
          
              <div class="form-check form-check-inline" *ngFor="let type of ['t10','t15','100balls','t20','oneDay','test']">
                <input type="radio" class="form-check-input" [value]="type" formControlName="matchType" id="matchType-{{type}}">
                <label class="form-check-label" [for]="'matchType-' + type">
                  {{ type | titlecase }}
                </label>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="d-block mb-2">Only Premium ?</label>
          
              <div class="form-check form-check-inline">
                <input type="radio" class="form-check-input" [value]="true" formControlName="premium" id="premium-yes">
                <label class="form-check-label" for="premium-yes">Yes</label>
              </div>
          
              <div class="form-check form-check-inline">
                <input type="radio" class="form-check-input" [value]="false" formControlName="premium" id="premium-no">
                <label class="form-check-label" for="premium-no">No</label>
              </div>
            </div>
          </div>

          <div class="text-end">
            <button type="button" class="btn btn-outline-secondary waves-effect" (click)="closeModal()">Close</button>
            <button type="submit" class="btn btn-primary waves-effect waves-light" [disabled]="addEventForm.invalid" style="margin-left: 1rem;">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!--Add Double Modal popup -->
<div class="modal fade" id="addDoubleEventModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 745px;">
    <div class="modal-content">
      <div class="modal-header" style="padding: 8px 16px;">
        <h5 class="modal-title">Select Competition</h5>
        <button type="button" class="btn-close" (click)="closeDoubleEventModal()" style="padding: 6px;font-size: 9px;"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="addDoubleEventForm" (ngSubmit)="addDoubleEvent()">

          <div class="mb-3 form-main">

            <div class="form-sub" *ngIf="selectedDoubleEvent?.isCompetitionExist === false">
              <label>Competition</label>
              <select class="form-select" formControlName="competition">
                <option value="">Select Competition</option>
                @for (item of maunalCompetitionManualList(); track $index) {
                   <option [ngValue]="item">{{item.competitionName}}</option>
                 }
              </select>
            </div>
            
            <div class="form-sub" *ngIf="selectedDoubleEvent?.isCompetitionExist === false">
              <label>Competition Grade</label>
              <select class="form-select" formControlName="competitionGrade">
                <option value="">Select Competition Grade</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
              </select>
            </div>
            
            <div class="form-sub">
              <label>Event Grade</label>
              <select class="form-select" formControlName="eventGrade">
                <option value="">Select Match Grade</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
              </select>
            </div>
          </div>

          <div class="mb-3 form-main" *ngIf="selectedDoubleEvent?.isDouble === true">
            <div class="form-sub" style="display: inline-grid">
              <label>Primary EventId</label>
              <input type="text" formControlName="primaryEventId" style="border-radius: 4px;border: 1px solid #a5a5a5;padding: 4px;" (keypress)="allowOnlyNumbers($event)" (paste)="onNumberPaste($event)">
            </div>
            
            <div class="form-sub" style="display: inline-grid">
              <label>Primary MarketId</label>
              <input type="text" formControlName="primaryMarketId" style="border-radius: 4px;border: 1px solid #a5a5a5;padding: 4px;" (keypress)="allowDecimal($event)" (paste)="onDecimalPaste($event)">
            </div>
          </div>

          <div class="mb-3 form-main" *ngIf="selectedDoubleEvent?.isDouble === true">
            <div class="form-sub" style="display: inline-grid">
              <label>Alt EventId</label>
              <input type="text" formControlName="altEventId" style="border-radius: 4px;border: 1px solid #a5a5a5;padding: 4px;" (keypress)="allowOnlyNumbers($event)" (paste)="onNumberPaste($event)">
            </div>
            
            <div class="form-sub" style="display: inline-grid">
              <label>Alt MarketId</label>
              <input type="text" formControlName="altMarketId" style="border-radius: 4px;border: 1px solid #a5a5a5;padding: 4px;" (keypress)="allowDecimal02($event)" (paste)="onDecimalPaste($event)">
            </div>
          </div>


          <div *ngIf="selectedSport === '4' && selectedEvent?.isWinnerOpen !== true">
            <div class="mb-3">
              <label class="d-block mb-2">Match Type</label>
          
              <div class="form-check form-check-inline" *ngFor="let type of ['t10','t15','100balls','t20','oneDay','test']">
                <input type="radio" class="form-check-input" [value]="type" formControlName="matchType" id="matchType-{{type}}">
                <label class="form-check-label" [for]="'matchType-' + type">
                  {{ type | titlecase }}
                </label>
              </div>
            </div>
          
            <div class="mb-3">
              <label class="d-block mb-2">Only Premium ?</label>
          
              <div class="form-check form-check-inline">
                <input type="radio" class="form-check-input" [value]="true" formControlName="premium" id="premium-yes">
                <label class="form-check-label" for="premium-yes">Yes</label>
              </div>
          
              <div class="form-check form-check-inline">
                <input type="radio" class="form-check-input" [value]="false" formControlName="premium" id="premium-no">
                <label class="form-check-label" for="premium-no">No</label>
              </div>
            </div>
          </div>

          <div class="text-end">
            <button type="button" class="btn btn-outline-secondary waves-effect" (click)="closeDoubleEventModal()">Close</button>
            <button type="submit" class="btn btn-primary waves-effect waves-light" [disabled]="addDoubleEventForm.invalid" style="margin-left: 1rem;">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<div class="loader-overlay" *ngIf="isloading">
  <div class="spinner"></div>
</div>